<!DOCTYPE html>
<head>
   
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<header>
<nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">SP-IT</a>
      </div>
      <ul class="nav navbar-nav">
        <li class="active"><a href="/home/">Home</a></li>
        <li id="login"></li>
        <li id="addItems"></li>
      </ul>
    </div>
</nav>
    </header>

    <body>

      <div id="category-form" class="container">

          <div class="row">
 
            <div class="dropdown col-sm-1" style="padding: 40px;">
                <button class="btn btn-dark dropdown-toggle" type="button" data-toggle="dropdown">Category
                <span class="caret"></span></button>
                <ul class="dropdown-menu">
                  <li><a href="#">HTML</a></li>
                  <li><a href="#">CSS</a></li>
                  <li><a href="#">JavaScript</a></li>
                </ul>
              </div>


              
              <div class="dropdown col-sm-1" style="padding: 40px;">
                <button class="btn btn-dark dropdown-toggle" type="button" data-toggle="dropdown">Product
                <span class="caret"></span></button>
                <ul class="dropdown-menu">
                  <li><a href="#">HTML</a></li>
                  <li><a href="#">CSS</a></li>
                  <li><a href="#">JavaScript</a></li>
                </ul>
              </div>

              <div id="search" class="d-flex justify-content-end row" style="margin-left:800px;margin-top: 40px;margin-right: 200px;">
                <div style="padding-bottom: 10px;">
                  <input type="text" class="form-control" id="search" placeholder="Search">
                </div>
                
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
   
            </div>
        
        </div>

       
    </body>
    <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    const baseUrl="http://localhost:8081";
    const token = localStorage.getItem("token");
    const loggedInUserID = parseInt(localStorage.getItem("loggedInUserID"));
    if (token === null || isNaN(loggedInUserID)) {

            const htmlLogout='<a href="/login/">Login</a>'
            $("#login").append(htmlLogout);

        }else{

          const html='<a href="/addItems/">add Items</a>'
          const htmlLogout='<a href="/login/">Logout</a>'
          $("#addItems").append(html);
          $("#login").append(htmlLogout);

          $("#login").click(e => {
                localStorage.removeItem("token");
                localStorage.removeItem("loggedInUserID");
                window.location.href = "/login/";
            });
        }
    //     axios.get(`${baseUrl}/product/:id`)
    // .then((response) =>{
    //   const Products = response.data;
    //   prod.forEach((productid) => {
    //     const ProductHtml =`
    //     <div class="card" style="margin-top: 2rem;">
    //                         <div class="card-body">
    //                             <p class="card-text">${prod.text_body}</p>
    //                         </div>
    //                         <div class="card-footer text-muted">
    //                             ${prod.created_at}
    //                         </div>
    //                     </div>`;
    //                     $("#productid").append(ProductHtml);
    //   });
    // })
    axios.get(`${baseUrl}/category/`)
            .then((response) => {
                      console.log("product sense")
                const category = response.data;
        console.log("get data");
                for (let i = 0; i < category.length; i++) {
                  console.log('get product',category[i]);
                    const categories = category[i];
                    console.log(categories)
                    const html = `
                    <li class="list-group-item">
                        <a href="/product/${categories.categoryid}">${categories.name}</a>
                    </li>
                    `;
                    console.log("all data checked");
                    $("#home").append(html);
                    console.log("data retrieved");
                }
            });
</script>
</html>